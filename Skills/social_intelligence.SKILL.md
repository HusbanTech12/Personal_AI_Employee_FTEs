# Social Intelligence Skill

## Purpose

Central decision-making brain for all communication channels. This skill serves as the cognitive hub that analyzes, classifies, and routes all incoming communications across Gmail, WhatsApp, and LinkedIn platforms.

---

## Responsibilities

### 1. Multi-Channel Analysis

Analyze incoming events from:
- **Gmail**: Email communications, attachments, sender reputation
- **WhatsApp**: Instant messages, group chats, media shares
- **LinkedIn**: Connection requests, messages, job inquiries, business opportunities

### 2. Intent Classification

Classify each incoming communication into one of five categories:

| Intent | Description | Priority |
|--------|-------------|----------|
| `SALES` | Inbound sales inquiries, product interest, pricing requests | High |
| `SUPPORT` | Customer support tickets, bug reports, help requests | High |
| `BUSINESS` | Partnerships, collaborations, strategic opportunities | Medium |
| `SPAM` | Unsolicited promotions, phishing attempts, low-value noise | Low |
| `INTERNAL` | Team communications, internal updates, administrative | Medium |

### 3. Automatic Action Decision

For each classified intent, determine the required action:
- Immediate response needed
- Delegate to specialist agent
- Schedule for later review
- Archive/ignore (spam)
- Escalate to human oversight

### 4. Plan Generation

Before any action execution, generate a structured plan document at `Plans/PLAN_<timestamp>.md` containing:
- Communication summary
- Classification rationale
- Proposed actions
- Required resources
- Estimated completion time

### 5. Task Routing

Route classified tasks to appropriate execution agents:
- `sales_agent` → SALES intents
- `support_agent` → SUPPORT intents
- `business_agent` → BUSINESS intents
- `internal_agent` → INTERNAL intents
- Discard → SPAM intents

---

## Rules

### Mandatory Rules

1. **Never Directly Execute Actions**
   - This skill is purely analytical and decision-making
   - All actions must be delegated to execution agents

2. **Always Create Plans**
   - Every decision must be documented in `Plans/PLAN_<YYYYMMDD_HHMMSS>.md`
   - Plans serve as audit trail and execution blueprint

3. **Enable Autonomous Reasoning Loop**
   - Continuously monitor all connected channels
   - Process events in real-time
   - Self-correct classification based on feedback

4. **Log Every Decision**
   - All classifications and routing decisions logged to `Logs/audit.log`
   - Include timestamp, channel, classification, confidence score, and action

### Classification Rules

```
IF message contains pricing/buy/demo/purchase → SALES
IF message contains help/issue/bug/problem/error → SUPPORT
IF message contains partnership/collaboration/investment → BUSINESS
IF message is unsolicited OR sender unknown + promotional → SPAM
IF sender is internal team OR domain matches company → INTERNAL
```

### Confidence Thresholds

- **High Confidence (≥0.85)**: Auto-route to execution agent
- **Medium Confidence (0.60-0.84)**: Create plan, await confirmation
- **Low Confidence (<0.60)**: Flag for human review

---

## Input Schema

```json
{
  "event_id": "string",
  "channel": "gmail|whatsapp|linkedin",
  "timestamp": "ISO8601",
  "sender": {
    "name": "string",
    "address": "string",
    "domain": "string",
    "is_known": "boolean"
  },
  "content": {
    "subject": "string",
    "body": "string",
    "attachments": ["string"],
    "metadata": {}
  },
  "context": {
    "thread_id": "string",
    "previous_interactions": "integer",
    "relationship": "string"
  }
}
```

---

## Output Schema

```json
{
  "plan_id": "PLAN_YYYYMMDD_HHMMSS",
  "event_id": "string",
  "classification": {
    "intent": "SALES|SUPPORT|BUSINESS|SPAM|INTERNAL",
    "confidence": "float (0.0-1.0)",
    "reasoning": "string"
  },
  "action": {
    "type": "route|escalate|archive|schedule",
    "target_agent": "string|null",
    "priority": "critical|high|medium|low",
    "deadline": "ISO8601|null"
  },
  "plan_path": "Plans/PLAN_YYYYMMDD_HHMMSS.md",
  "logged": "boolean"
}
```

---

## Plan Template

All generated plans follow this structure:

```markdown
# Plan: <PLAN_ID>

## Generated
<Timestamp>

## Source Event
- **Channel**: <channel>
- **Event ID**: <event_id>
- **Sender**: <sender_name> (<sender_address>)

## Classification
- **Intent**: <intent>
- **Confidence**: <confidence>%
- **Reasoning**: <classification_rationale>

## Proposed Actions
1. <action_1>
2. <action_2>
3. <action_3>

## Routing
- **Target Agent**: <agent_name>
- **Priority**: <priority>
- **Deadline**: <deadline>

## Required Resources
- <resource_1>
- <resource_2>

## Estimated Completion
<time_estimate>

---
*Auto-generated by Social Intelligence Skill*
```

---

## Audit Log Format

All decisions appended to `Logs/audit.log`:

```
[TIMESTAMP] | CHANNEL | EVENT_ID | INTENT | CONFIDENCE | ACTION | AGENT | STATUS
```

Example:
```
[2026-02-28T10:15:32Z] | gmail | evt_abc123 | SALES | 0.92 | route | sales_agent | queued
[2026-02-28T10:16:45Z] | linkedin | evt_def456 | SPAM | 0.97 | archive | none | discarded
```

---

## Integration Points

### Required Connections

| System | Purpose | Method |
|--------|---------|--------|
| Gmail API | Email ingestion | OAuth2 + webhooks |
| WhatsApp Business API | Message ingestion | Webhook callbacks |
| LinkedIn API | Professional network events | OAuth2 + polling |
| Plan Executor | Handoff execution plans | File system watch |
| Audit Logger | Decision logging | Append-only file |

### Execution Agents

- `agents/sales_agent.AGENT.md`
- `agents/support_agent.AGENT.md`
- `agents/business_agent.AGENT.md`
- `agents/internal_agent.AGENT.md`

---

## Error Handling

| Error Type | Response |
|------------|----------|
| Classification failure | Default to INTERNAL, flag for review |
| Plan generation failure | Log error, queue event for retry |
| Agent unavailable | Queue task, notify admin |
| Channel disconnected | Log outage, buffer events |

---

## Performance Metrics

- **Classification Accuracy**: Target ≥90%
- **Processing Latency**: Target <5 seconds per event
- **False Positive Rate (SPAM)**: Target <2%
- **Plan Generation Time**: Target <1 second

---

## File Locations

```
Skills/social_intelligence.SKILL.md    ← This file
Plans/PLAN_*.md                        ← Generated plans
Logs/audit.log                         ← Decision audit trail
agents/*.AGENT.md                      ← Execution agents
```

---

*Skill Version: 1.0.0*  
*Last Updated: 2026-02-28*  
*Tier: GOLD*
